{"openapi":"3.0.0","info":{"title":"Tripedge Backend API","version":"1.0.0"},"servers":[{"url":"/api","description":"API server"}],"security":[{"ApiKeyAuth":[]}],"components":{"securitySchemes":{"ApiKeyAuth":{"type":"apiKey","in":"header","name":"Authorization","description":"API key for authentication"}},"schemas":{"UserResponse":{"type":"object","properties":{"id":{"type":"number"},"firstName":{"type":"string"},"lastName":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"clientAccountLimit":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"deletedAt":{"type":"string","format":"date-time"}},"required":["id","firstName","lastName","email","phone","clientAccountLimit","createdAt","updatedAt","deletedAt"]},"UserTokenResponse":{"type":"object","properties":{"token":{"type":"string"},"expiresAt":{"type":"string","format":"date-time"}},"required":["token","expiresAt"]},"BookingListResponse":{"type":"array","items":{"type":"object","properties":{"id":{"type":"number"},"status":{"type":"string","enum":["confirmed","pending","cancelled"]},"voucher":{"type":"string"},"hotelId":{"type":"number"},"checkIn":{"type":"string"},"checkOut":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"lines":{"type":"array","items":{"type":"object","properties":{"lineText":{"type":"string"},"type":{"type":"string","enum":["room","fee","payAtHotel"]},"amount":{"type":"string"}},"required":["lineText","type","amount"]}},"pricePerNight":{"type":"string"},"priceFees":{"type":"string"},"priceDueAtHotel":{"type":"string"},"priceInclusive":{"type":"string"},"priceChargeable":{"type":"string"},"pricePerRoom":{"type":"string"},"pricePerRoomPerNight":{"type":"string"},"priceBeforeFees":{"type":"string"},"currency":{"type":"string"},"remarks":{"type":"string"},"roomType":{"type":"string"},"cancellationPolicy":{"type":"string"},"cancellationPolicyDate":{"type":"string"},"rooms":{"type":"array","items":{"type":"object","properties":{"adults":{"type":"array","items":{"type":"object","properties":{"title":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"}},"required":["title","firstName","lastName"]}},"children":{"type":"array","items":{"type":"object","properties":{"title":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"age":{"type":"number"}},"required":["title","firstName","lastName","age"]}}},"required":["adults","children"]}},"clientCommission":{"type":"string"},"paymentMethod":{"type":"string","enum":["creditCard","account"]},"userId":{"type":"number"},"hotel":{"type":"object","properties":{"id":{"type":"number"},"name":{"type":"string"},"stars":{"type":"number","minimum":1,"maximum":5},"coordinates":{"type":"array","items":{"type":"number"},"minItems":2,"maxItems":2},"address":{"type":"object","properties":{"address":{"type":"string"},"city":{"type":"string"},"country":{"type":"string"},"countryCode":{"type":"string"}}},"rating":{"type":"number","minimum":0,"maximum":5},"reviews":{"type":"number","minimum":0},"pricePerNight":{"type":"string"},"priceChargeable":{"type":"string"},"pricePerRoom":{"type":"string"},"pricePerRoomPerNight":{"type":"string"},"priceBeforeFees":{"type":"string"},"priceFees":{"type":"string"},"priceDueAtHotel":{"type":"string"},"priceInclusive":{"type":"string"},"amenities":{"type":"array","items":{"type":"string"}},"location":{"type":"string"},"images":{"type":"array","items":{"type":"string","format":"uri"}},"exclusive":{"type":"boolean"},"type":{"type":"string"}},"required":["id","name","stars","address","rating","reviews","pricePerNight","priceChargeable","pricePerRoom","pricePerRoomPerNight","priceBeforeFees","priceFees","priceDueAtHotel","priceInclusive","amenities","location","images","exclusive","type"]}},"required":["id","status","voucher","hotelId","checkIn","checkOut","firstName","lastName","email","phone","lines","pricePerNight","priceFees","priceDueAtHotel","priceInclusive","priceChargeable","pricePerRoom","pricePerRoomPerNight","priceBeforeFees","currency","remarks","roomType","cancellationPolicy","cancellationPolicyDate","rooms","clientCommission","paymentMethod","userId","hotel"]}},"AccountingEntryResponse":{"type":"object","properties":{"id":{"type":"number"},"debit":{"type":"number"},"credit":{"type":"number"},"name":{"type":"string"},"clientId":{"type":"number"},"bookingId":{"type":"number"},"ccPaymentId":{"type":"string"},"userId":{"type":"number"},"bankPaymentId":{"type":"number"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"deletedAt":{"type":"string","format":"date-time"}},"required":["id","debit","credit","name","clientId","bookingId","ccPaymentId","userId","bankPaymentId","createdAt","updatedAt","deletedAt"]}}},"paths":{"/user":{"post":{"summary":"Create a new user","operationId":"createUser","security":[{"ApiKeyAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"firstName":{"type":"string","minLength":1},"lastName":{"type":"string","minLength":1},"email":{"type":"string","format":"email"},"phone":{"type":"string","minLength":1},"clientAccountLimit":{"type":"number","minimum":0}},"required":["firstName","lastName","email","phone","clientAccountLimit"]}}}},"responses":{"200":{"description":"User created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","description":"Indicates if the request was successful"},"message":{"type":"string","nullable":true,"description":"Response message, null if successful"},"data":{"type":"object","properties":{"id":{"type":"number"},"firstName":{"type":"string"},"lastName":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"clientAccountLimit":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"deletedAt":{"type":"string","format":"date-time"}},"required":["id","firstName","lastName","email","phone","clientAccountLimit","createdAt","updatedAt","deletedAt"]}}}}}}}}},"/user/{id}":{"get":{"summary":"Get user by ID","operationId":"getUserById","security":[{"ApiKeyAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true}],"responses":{"200":{"description":"User found","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","description":"Indicates if the request was successful"},"message":{"type":"string","nullable":true,"description":"Response message, null if successful"},"data":{"type":"object","properties":{"id":{"type":"number"},"firstName":{"type":"string"},"lastName":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"clientAccountLimit":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"deletedAt":{"type":"string","format":"date-time"}},"required":["id","firstName","lastName","email","phone","clientAccountLimit","createdAt","updatedAt","deletedAt"]}}}}}}}},"put":{"summary":"Update user by ID","operationId":"updateUser","security":[{"ApiKeyAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"firstName":{"type":"string","minLength":1},"lastName":{"type":"string","minLength":1},"email":{"type":"string","format":"email"},"phone":{"type":"string","minLength":1},"clientAccountLimit":{"type":"string"}}}}}},"responses":{"200":{"description":"User updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","description":"Indicates if the request was successful"},"message":{"type":"string","nullable":true,"description":"Response message, null if successful"},"data":{"type":"object","properties":{"id":{"type":"number"},"firstName":{"type":"string"},"lastName":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"clientAccountLimit":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"deletedAt":{"type":"string","format":"date-time"}},"required":["id","firstName","lastName","email","phone","clientAccountLimit","createdAt","updatedAt","deletedAt"]}}}}}}}}},"/user/{id}/token":{"get":{"summary":"Get user token by ID","operationId":"getUserToken","security":[{"ApiKeyAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true}],"responses":{"200":{"description":"User token found","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","description":"Indicates if the request was successful"},"message":{"type":"string","nullable":true,"description":"Response message, null if successful"},"data":{"type":"object","properties":{"token":{"type":"string"},"expiresAt":{"type":"string","format":"date-time"}},"required":["token","expiresAt"]}}}}}}}}},"/booking":{"get":{"summary":"Get all bookings for authenticated client and user","operationId":"getBookings","security":[{"ApiKeyAuth":[]}],"responses":{"200":{"description":"Bookings found","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","description":"Indicates if the request was successful"},"message":{"type":"string","nullable":true,"description":"Response message"},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"number"},"status":{"type":"string","enum":["confirmed","pending","cancelled"]},"voucher":{"type":"string"},"hotelId":{"type":"number"},"checkIn":{"type":"string"},"checkOut":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"lines":{"type":"array","items":{"type":"object","properties":{"lineText":{"type":"string"},"type":{"type":"string","enum":["room","fee","payAtHotel"]},"amount":{"type":"string"}},"required":["lineText","type","amount"]}},"pricePerNight":{"type":"string"},"priceFees":{"type":"string"},"priceDueAtHotel":{"type":"string"},"priceInclusive":{"type":"string"},"priceChargeable":{"type":"string"},"pricePerRoom":{"type":"string"},"pricePerRoomPerNight":{"type":"string"},"priceBeforeFees":{"type":"string"},"currency":{"type":"string"},"remarks":{"type":"string"},"roomType":{"type":"string"},"cancellationPolicy":{"type":"string"},"cancellationPolicyDate":{"type":"string"},"rooms":{"type":"array","items":{"type":"object","properties":{"adults":{"type":"array","items":{"type":"object","properties":{"title":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"}},"required":["title","firstName","lastName"]}},"children":{"type":"array","items":{"type":"object","properties":{"title":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"age":{"type":"number"}},"required":["title","firstName","lastName","age"]}}},"required":["adults","children"]}},"clientCommission":{"type":"string"},"paymentMethod":{"type":"string","enum":["creditCard","account"]},"userId":{"type":"number"},"hotel":{"type":"object","properties":{"id":{"type":"number"},"name":{"type":"string"},"stars":{"type":"number","minimum":1,"maximum":5},"coordinates":{"type":"array","items":{"type":"number"},"minItems":2,"maxItems":2},"address":{"type":"object","properties":{"address":{"type":"string"},"city":{"type":"string"},"country":{"type":"string"},"countryCode":{"type":"string"}}},"rating":{"type":"number","minimum":0,"maximum":5},"reviews":{"type":"number","minimum":0},"pricePerNight":{"type":"string"},"priceChargeable":{"type":"string"},"pricePerRoom":{"type":"string"},"pricePerRoomPerNight":{"type":"string"},"priceBeforeFees":{"type":"string"},"priceFees":{"type":"string"},"priceDueAtHotel":{"type":"string"},"priceInclusive":{"type":"string"},"amenities":{"type":"array","items":{"type":"string"}},"location":{"type":"string"},"images":{"type":"array","items":{"type":"string","format":"uri"}},"exclusive":{"type":"boolean"},"type":{"type":"string"}},"required":["id","name","stars","address","rating","reviews","pricePerNight","priceChargeable","pricePerRoom","pricePerRoomPerNight","priceBeforeFees","priceFees","priceDueAtHotel","priceInclusive","amenities","location","images","exclusive","type"]}},"required":["id","status","voucher","hotelId","checkIn","checkOut","firstName","lastName","email","phone","lines","pricePerNight","priceFees","priceDueAtHotel","priceInclusive","priceChargeable","pricePerRoom","pricePerRoomPerNight","priceBeforeFees","currency","remarks","roomType","cancellationPolicy","cancellationPolicyDate","rooms","clientCommission","paymentMethod","userId","hotel"]}}}}}}}}}},"/booking/user/{userId}":{"get":{"summary":"Get all bookings for a specific user","operationId":"getBookingsByUserId","security":[{"ApiKeyAuth":[]}],"parameters":[{"in":"path","name":"userId","schema":{"type":"string"},"required":true,"description":"ID of the user to get bookings for"}],"responses":{"200":{"description":"Bookings found","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","description":"Indicates if the request was successful"},"message":{"type":"string","nullable":true,"description":"Response message"},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"number"},"status":{"type":"string","enum":["confirmed","pending","cancelled"]},"voucher":{"type":"string"},"hotelId":{"type":"number"},"checkIn":{"type":"string"},"checkOut":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"lines":{"type":"array","items":{"type":"object","properties":{"lineText":{"type":"string"},"type":{"type":"string","enum":["room","fee","payAtHotel"]},"amount":{"type":"string"}},"required":["lineText","type","amount"]}},"pricePerNight":{"type":"string"},"priceFees":{"type":"string"},"priceDueAtHotel":{"type":"string"},"priceInclusive":{"type":"string"},"priceChargeable":{"type":"string"},"pricePerRoom":{"type":"string"},"pricePerRoomPerNight":{"type":"string"},"priceBeforeFees":{"type":"string"},"currency":{"type":"string"},"remarks":{"type":"string"},"roomType":{"type":"string"},"cancellationPolicy":{"type":"string"},"cancellationPolicyDate":{"type":"string"},"rooms":{"type":"array","items":{"type":"object","properties":{"adults":{"type":"array","items":{"type":"object","properties":{"title":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"}},"required":["title","firstName","lastName"]}},"children":{"type":"array","items":{"type":"object","properties":{"title":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"age":{"type":"number"}},"required":["title","firstName","lastName","age"]}}},"required":["adults","children"]}},"clientCommission":{"type":"string"},"paymentMethod":{"type":"string","enum":["creditCard","account"]},"userId":{"type":"number"},"hotel":{"type":"object","properties":{"id":{"type":"number"},"name":{"type":"string"},"stars":{"type":"number","minimum":1,"maximum":5},"coordinates":{"type":"array","items":{"type":"number"},"minItems":2,"maxItems":2},"address":{"type":"object","properties":{"address":{"type":"string"},"city":{"type":"string"},"country":{"type":"string"},"countryCode":{"type":"string"}}},"rating":{"type":"number","minimum":0,"maximum":5},"reviews":{"type":"number","minimum":0},"pricePerNight":{"type":"string"},"priceChargeable":{"type":"string"},"pricePerRoom":{"type":"string"},"pricePerRoomPerNight":{"type":"string"},"priceBeforeFees":{"type":"string"},"priceFees":{"type":"string"},"priceDueAtHotel":{"type":"string"},"priceInclusive":{"type":"string"},"amenities":{"type":"array","items":{"type":"string"}},"location":{"type":"string"},"images":{"type":"array","items":{"type":"string","format":"uri"}},"exclusive":{"type":"boolean"},"type":{"type":"string"}},"required":["id","name","stars","address","rating","reviews","pricePerNight","priceChargeable","pricePerRoom","pricePerRoomPerNight","priceBeforeFees","priceFees","priceDueAtHotel","priceInclusive","amenities","location","images","exclusive","type"]}},"required":["id","status","voucher","hotelId","checkIn","checkOut","firstName","lastName","email","phone","lines","pricePerNight","priceFees","priceDueAtHotel","priceInclusive","priceChargeable","pricePerRoom","pricePerRoomPerNight","priceBeforeFees","currency","remarks","roomType","cancellationPolicy","cancellationPolicyDate","rooms","clientCommission","paymentMethod","userId","hotel"]}}}}}}}}}},"/accounting":{"post":{"summary":"Create a new accounting entry","operationId":"createAccountingEntry","security":[{"ApiKeyAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"debit":{"type":"number","minimum":0},"credit":{"type":"number","minimum":0},"name":{"type":"string","minLength":1},"clientId":{"type":"integer"},"bookingId":{"type":"integer"},"ccPaymentId":{"type":"string"},"userId":{"type":"integer"},"bankPaymentId":{"type":"integer"}},"required":["debit","credit","name","clientId"]}}}},"responses":{"201":{"description":"Accounting entry created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","description":"Indicates if the request was successful"},"message":{"type":"string","nullable":true,"description":"Response message"},"data":{"type":"object","properties":{"id":{"type":"number"},"debit":{"type":"number"},"credit":{"type":"number"},"name":{"type":"string"},"clientId":{"type":"number"},"bookingId":{"type":"number"},"ccPaymentId":{"type":"string"},"userId":{"type":"number"},"bankPaymentId":{"type":"number"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"deletedAt":{"type":"string","format":"date-time"}},"required":["id","debit","credit","name","clientId","bookingId","ccPaymentId","userId","bankPaymentId","createdAt","updatedAt","deletedAt"]}}}}}}}},"get":{"summary":"Get all accounting entries for authenticated client","operationId":"getAccountingEntries","security":[{"ApiKeyAuth":[]}],"responses":{"200":{"description":"Accounting entries found","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","description":"Indicates if the request was successful"},"message":{"type":"string","nullable":true,"description":"Response message"},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"number"},"debit":{"type":"number"},"credit":{"type":"number"},"name":{"type":"string"},"clientId":{"type":"number"},"bookingId":{"type":"number"},"ccPaymentId":{"type":"string"},"userId":{"type":"number"},"bankPaymentId":{"type":"number"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"deletedAt":{"type":"string","format":"date-time"}},"required":["id","debit","credit","name","clientId","bookingId","ccPaymentId","userId","bankPaymentId","createdAt","updatedAt","deletedAt"]}}}}}}}}}},"/accounting/{id}":{"get":{"summary":"Get accounting entry by ID","operationId":"getAccountingEntryById","security":[{"ApiKeyAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true}],"responses":{"200":{"description":"Accounting entry found","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","description":"Indicates if the request was successful"},"message":{"type":"string","nullable":true,"description":"Response message"},"data":{"type":"object","properties":{"id":{"type":"number"},"debit":{"type":"number"},"credit":{"type":"number"},"name":{"type":"string"},"clientId":{"type":"number"},"bookingId":{"type":"number"},"ccPaymentId":{"type":"string"},"userId":{"type":"number"},"bankPaymentId":{"type":"number"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"deletedAt":{"type":"string","format":"date-time"}},"required":["id","debit","credit","name","clientId","bookingId","ccPaymentId","userId","bankPaymentId","createdAt","updatedAt","deletedAt"]}}}}}}}}},"/accounting/booking/{bookingId}":{"get":{"summary":"Get accounting entries by booking ID","operationId":"getAccountingEntriesByBookingId","security":[{"ApiKeyAuth":[]}],"parameters":[{"in":"path","name":"bookingId","schema":{"type":"string"},"required":true}],"responses":{"200":{"description":"Accounting entries found","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","description":"Indicates if the request was successful"},"message":{"type":"string","nullable":true,"description":"Response message"},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"number"},"debit":{"type":"number"},"credit":{"type":"number"},"name":{"type":"string"},"clientId":{"type":"number"},"bookingId":{"type":"number"},"ccPaymentId":{"type":"string"},"userId":{"type":"number"},"bankPaymentId":{"type":"number"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"deletedAt":{"type":"string","format":"date-time"}},"required":["id","debit","credit","name","clientId","bookingId","ccPaymentId","userId","bankPaymentId","createdAt","updatedAt","deletedAt"]}}}}}}}}}}}}